<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Chats</title>
</head>
<body>
    <h1>Your chats</h1>
    <ul id="messages"></ul>
    <script>
        var urlParams = new URLSearchParams(window.location.search);
        var userID = urlParams.get('chat')
        function filter(text){
            var text_length = text.length-2;
            var converted_text = text.substr(1,text_length);
            return converted_text 
        }
        $.ajax({
         type : "GET",
         datatype : "jsonp",
         url : `http://localhost:3000/chat/${userID}`,
         success: function(data){
            console.log(data.Message)
             var data_length = data.Message.length    
             for(var i = 0; i < data_length; i++){
                var myJSON = JSON.stringify(data.Message[i].name)
                var myID = JSON.stringify(data.Message[i]._id)
                $('#messages').append($(`<a href='http://localhost:8000/chat?chat=${filter(myID)}&user=${userID}'></a><br>`).text(filter(myJSON)))
             }
            }
        }); 
    </script>
</body>
</html>